!function(t){function e(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var n={};e.m=t,e.c=n,e.i=function(t){return t},e.d=function(t,n,i){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:i})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=2)}([function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=function(){function t(e){i(this,t),this.views=e.views,this.mode=e.mode||"out-in",this.stack={},this.init()}return r(t,[{key:"init",value:function(){var t=document.querySelector("title").innerHTML,e=document.querySelector("[namespace]"),n=e.getAttribute("namespace");this.path=window.location.pathname,this.stack[this.path]={title:t,root:e,name:n},this.current=new this.views[n](this.stack[this.path]),this.current.init(),this.bind()}},{key:"bind",value:function(){if(this.onPopstate||(this.onPopstate=this.popstate.bind(this),window.addEventListener("popstate",this.onPopstate)),!this.onUpdate){var t=document.querySelectorAll("a:not([router-disable])");this.onUpdate=this.update.bind(this);var e=!0,n=!1,i=void 0;try{for(var r,o=t[Symbol.iterator]();!(e=(r=o.next()).done);e=!0){r.value.addEventListener("click",this.onUpdate)}}catch(t){n=!0,i=t}finally{try{!e&&o.return&&o.return()}finally{if(n)throw i}}}}},{key:"unbind",value:function(){if(this.onUpdate){var t=document.querySelectorAll("a:not([router-disable])"),e=!0,n=!1,i=void 0;try{for(var r,o=t[Symbol.iterator]();!(e=(r=o.next()).done);e=!0){r.value.removeEventListener("click",this.onUpdate)}}catch(t){n=!0,i=t}finally{try{!e&&o.return&&o.return()}finally{if(n)throw i}}this.onUpdate=null}}},{key:"popstate",value:function(){this.path=window.location.pathname,this.fetchCall()}},{key:"update",value:function(t){t.preventDefault();var e=t.currentTarget,n=e.getAttribute("href");if("_blank"===e.getAttribute("target"))return void window.open(n,"_blank");if(n!==this.path){this.path=n;var i=e,r=this.link;if(r){var o=r.getAttribute("router-active");o&&r.classList.remove(o),this.link=null}if(i){var a=i.getAttribute("router-active");a&&i.classList.add(a),this.link=i}window.history.pushState({path:this.path},"",this.path),this.fetchCall()}}},{key:"fetchCall",value:function(){var t=this;if(!this.stack[this.path])return void fetch(this.path).then(function(t){return t.text()}).then(function(e){return t.fetchSuccess(e)}).catch(function(e){return t.fetchError(e)});this.redirect()}},{key:"fetchSuccess",value:function(t){var e=(new DOMParser).parseFromString(t,"text/html"),n=e.querySelector("title").innerHTML,i=e.querySelector("[namespace]"),r=i.getAttribute("namespace");this.stack[this.path]={title:n,root:i,name:r},this.redirect()}},{key:"fetchError",value:function(t){throw new Error(t)}},{key:"redirect",value:function(){var t=this,e=this.stack[this.path].name;switch(this.previous=this.current,this.current=new this.views[e](this.stack[this.path]),this.mode){case"both":this.unbind(),this.current.append(),this.current.load(),this.previous.unload(function(){t.previous.remove(),t.bind()});break;case"in-out":this.unbind(),this.current.append(),this.current.load(function(){t.previous.unload(function(){t.previous.remove(),t.bind()})});break;default:this.unbind(),this.previous.unload(function(){t.current.append(),t.current.load(),t.previous.remove(),t.bind()})}}}]),t}();e.default=o},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=function(){function t(e){if(i(this,t),void 0===this.transition)throw new Error("Undefined Transitions");this.title=e.title,this.root=e.root,this.name=e.name,this.wrapper=document.querySelector(".router-wrapper")}return r(t,[{key:"init",value:function(){this.onEnterCompleted()}},{key:"append",value:function(){document.title=this.title,this.wrapper.appendChild(this.root)}},{key:"remove",value:function(){this.wrapper.removeChild(this.root),this.onLeaveCompleted()}},{key:"load",value:function(t){var e=this;this.onEnter(),this.tIn=new Promise(function(t,n){if(!e.transition.in)return void n();e.transition.in(e.root,t)}),this.tIn.then(this.init.bind(this)).then(this.analytics.bind(this)).then(t).catch(function(){throw new Error("Undefined Transition In")})}},{key:"unload",value:function(t){var e=this;this.onLeave(),this.tOut=new Promise(function(t,n){if(!e.transition.out)return void n();e.transition.out(e.root,t)}),this.tOut.then(t).catch(function(){throw new Error("Undefined Transition Out")})}},{key:"analytics",value:function(){"undefined"!=typeof ga&&(ga("set",{page:window.location.pathname,title:document.title}),ga("send","pageview"))}}]),t}();e.default=o},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(1),o=i(r),a=n(0),u=i(a),s={View:o.default,Router:u.default};e.default=s}]);